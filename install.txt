*** Installation ***

The following describes the procedure to enable B2SAFE release-3.0.0

NOTE: iRODS is running as a normal user process. NOT as root. The package needs 
to be build by the user who runs iRODS. In the examples the user who runs 
iRODS is "irods".

It works as follows:
- clone the b2safe project under the user which runs irods. NOT root
  $ git clone https://github.com/EUDAT-B2SAFE/B2SAFE-core.git
- go to the directory where the packaging files are:
  $ cd B2SAFE-core/packaging

* RPM *

- create package for the user who runs the irods instance:
  $ ./create_rpm_package.sh
- login as root and install package:
  # rpm -ivh /home/irods/rpmbuild/RPMS/noarch/irods-eudat-b2safe-3.0-0.noarch.rpm
  Preparing...                ########################################### [100%]
     1:irods-eudat-b2safe     ########################################### [100%]

* DEB *

- create package for the user who runs the irods instance:
  $ ./create_deb_package.sh
- login as root or use sudo to install package:
  # dpkg -i --ignore-depends irods-icat /home/irods/debbuild/irods-eudat-b2safe_3.0-0.deb
  Selecting previously unselected package irods-eudat-b2safe.
  (Reading database ... .... files and directories currently installed.)
  Preparing to unpack .../irods-eudat-b2safe_3.0-0.deb ...
  Unpacking irods-eudat-b2safe (3.0-0) ...
  Setting up irods-eudat-b2safe (3.0-0) ...


  The package b2safe has been installed in /opt/eudat/b2safe.
  To install/configure it in iRODS do following as the user "irods" which runs iRODS 


- Perform the after installation tuning/updates as the user who runs the irods instance.
  su - irods
  cd /opt/eudat/b2safe/packaging
  # update install.conf with correct parameters with your favorite editor. The 
  # following need to be updated:
    - DEFAULT_RESOURCE
    - SERVER_ID
    - BASE_URI
    - USERNAME
    - PREFIX
  - perform the postinstallation script
  $ ./install.sh


DONE
